@page
@using DailyReport.Models
@model DailyReport.Pages.FireReport.FireReportModel
@{
    string msg;
    if ((Model.departmentNumber == 90) || (Model.departmentNumber == 91)) msg = "ОРИТ";
    else if (Model.departmentNumber == 8) msg = "Дневной стационар";
    else if (Model.departmentNumber == 11) msg = " 1 отделения";
    else msg = Model.departmentNumber + " отделения";
    ViewData["Title"] = "Пожарная сводка " + msg;
}

<form method="post">
    <div class="row">
        <div class="col-4">
            <select class="form-select" asp-for="DutyNurse.name">
                <option selected disabled>Выбрать дежурную медсестру</option>
                @{
                    foreach (Personel nurse in Model.nursesList)
                    {
                        <option value="@nurse.Name">@nurse.Name</option>
                    }
                }
            </select>
        </div>
        <div class="col-2 d-none">
            <input type="int" value="@Model.departmentNumber" class="form-control invisible" asp-for="DutyNurse.department" />
            <input type="datetime" value="@DateTime.Now" class="form-control invisible" asp-for="DutyNurse.dutyDate" />
        </div>
        <div class="col-2">
            <input type="submit" value="+" asp-page-handler="SaveNurse"/>
        </div>
    </div>
</form>
<div class="row pb-3">
    <div class="col-5"> <h3>Дежурная медсестра</h3></div>
    <div class="col-3"><h4>Телефон</h4></div>
    <div class="col-2"><h4>Отделение</h4></div>
</div>
@{
    foreach (DutyNurse dutyNurse in Model.dutyNurses){
        <form method="post">
            <div class="row">
                <div class="col-5">@dutyNurse.name</div>
                <div class="col-3">@dutyNurse.Phone</div>
                <div class="col-2">@dutyNurse.ToDepName()</div>
                <div class="col-1">
                    <input type="submit" value="&#128465" asp-page-handler="DeleteNurse" asp-route-id="@dutyNurse.Id" asp-route-depNumber="@Model.departmentNumber" />
                </div>
            </div>
        </form>
    }
}
<div class="row pb-3">
    <div class="col-4"> <h2>Состоит</h2></div>
</div>
<div class="row ">
    <div class="col-2"> <h4>Взрослых</h4></div>
    <div class="col-2"><h4>Детей</h4></div>
    <div class="col-2"><h4>По уходу</h4></div>
    <div class="col-2"><h4>Сотрудников</h4></div>
    <div class="col-2"><h4>Дата и время</h4></div>
</div>

<form method="post">
    <div class="row">
        <div class="col-2">
            <input required min="0" value="@Model.fireReport.Adult" type="number" name="Adult" asp-for="fireReport.Adult"/>
        </div>
        <div class="col-2">
            <input required min="0" value="@Model.fireReport.Children" type="number" name="Children" asp-for="fireReport.Children"/>
        </div>
        <div class="col-2">
            <input required min="0" value="@Model.fireReport.Care" type="number" name="Care" asp-for="fireReport.Care"/>
        </div>
        <div class="col-2">
            <input required min="0" value="@Model.fireReport.Personel" type="number" name="Personel" asp-for="fireReport.Personel"/>
        </div>
        <div class="col-2">
            <input disabled value="@Model.fireReport.Date.ToString("HH:mm dd.MM.yy")" type="datetime"/>
        </div>
        <div class="col-2 d-none">
            <input value="@Model.fireReport.DepNumber" type="number" name="DepNumber" asp-for="fireReport.DepNumber"/>
            <input value="@Model.fireReport.Id" type="number" name="Id" asp-for="fireReport.Id" />
        </div>
        <div class="col-2">
            <input type="submit" value="+" asp-page-handler="SaveFireReport"/>
        </div>
    </div>
</form>
